# Сценарии

В этом слое реализуется специфика бизнес-правил. Он инкапсулирует и реализует все случаи использования системы. Эти сценарии реализуют поток данных в и из слоя _Cущностей_ для реализации бизнес-правил.

Мы не ожидаем изменения в этом слое, влияющих на _Cущности_. Мы также не ожидаем, что это слой может быть затронут внешними изменениями, таких как базы данных, пользовательским интерфейсом или фреймворком. Этот слой изолирован от таких проблем.

Мы, однако, ожидаем, что изменения в работе приложения повлияет на _Cценарии_. Если будут какие-либо изменения в поведении приложения, то они несомненно затронут код в данном слое.

## Application Business Rules (Правила логики функционирования приложения)

Это правила, которые являются хоть и не основными, но необходимыми для логики функционирования конкретного приложения. В этот уровень входят `Use Cases`(сценарии использования), то есть он содержит все предоставляемые приложением функции.

Кроме того, этот уровень определяет контроллер/шлюз (`Controller / Gateway`), вызываемые для конкретного варианта использования. Иногда нужны контроллеры из разных модулей.

Именно здесь они и выбираются. Например, нужно применить скидку для пользователя, который в течение месяца совершил покупки на сумму _x_.

В этом случае нужно получить из `purchase module` (модуля покупки) сумму, потраченную пользователем в этом месяце, а затем по результату применить скидку в `checkout module` (модуле оформления заказа). Здесь `applyDiscountUseCase` вызывает контроллер модуля покупки для получения данных, а затем применяет скидку в модуле оформления заказа.

В этом слое размещены компоненты:

* Application Services/Use cases
* Command/Query classes
* Command/Query Handlers
